<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>오늘의 문장</title>
<style>
body{
    margin:0;
    background:#2a2a2a;
    color:#f5f5f5;
    font-family: 'Pretendard', sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    text-align:center;
    padding:20px;
}
.card{
    max-width:500px;
}
h1{
    font-size:18px;
    opacity:0.6;
}
.quote{
    font-size:26px;
    margin-top:20px;
    line-height:1.5;
}
.footer{
    margin-top:40px;
    font-size:14px;
    opacity:0.4;
}
</style>
</head>
<body>
<div class="card">
<h1>오늘의 문장</h1>
<div class="quote" id="quote"></div>
<div class="footer">Buddha Object · Bilillego</div>
</div>

<script>
document.getElementById("quote").innerText = "불러오는 중…";

function dayOfYearKST(date = new Date()) {
  const kst = new Date(date.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));
  const start = new Date(kst.getFullYear(), 0, 0);
  const diff = kst - start;
  const oneDay = 1000 * 60 * 60 * 24;
  return Math.floor(diff / oneDay);
}

async function run() {
  try {
    const res = await fetch("https://bilillego.github.io/bilillego/quotes.json", { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);

    const quotes = await res.json();
    if (!Array.isArray(quotes) || quotes.length === 0) throw new Error("quotes.json is empty");

    const doy = dayOfYearKST();
    const index = (doy - 1) % quotes.length;

    document.getElementById("quote").innerText = quotes[index];
  } catch (e) {
    console.error(e);
    document.getElementById("quote").innerText = "문장을 불러오지 못했어요. (quotes.json 확인)";
  }
}

run();
</script>


</body>
</html>
